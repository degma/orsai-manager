{% extends "base.html" %}
{% block content %}
  <h1>Matches</h1>

  <p><a href="{{ url_for('admin.index') }}">Back to admin</a></p>

  <h2>Create match</h2>
  <form method="post">
    <div>
      <label>Season</label>
      <select name="season_id">
        <option value="">Select</option>
        {% for season in seasons %}
          <option value="{{ season.id }}" {% if season.id == active_season_id %}selected{% endif %}>
            {{ season.year }} {{ season.term }} - {{ season.tournament.name }}
          </option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label>Date</label>
      <input type="date" name="date" />
    </div>
    <div>
      <label>Opponent</label>
      <input name="opponent" />
    </div>
    <div>
      <label>Location</label>
      <input name="location" />
    </div>
    <button type="submit">Create</button>
  </form>

  <h2>Existing matches</h2>
  {% if matches %}
    <ul>
      {% for match in matches %}
        <li>
          {{ match.season.year }} {{ match.season.term }} - {{ match.date }} vs {{ match.opponent }}
          ({{ match.our_score }}-{{ match.their_score }}, {{ match.status }})
          <a href="{{ url_for('admin.match_detail', match_id=match.id) }}">Edit</a>
          <a href="{{ url_for('admin.match_stats', match_id=match.id) }}">Manage stats</a>
          <a href="{{ url_for('admin.match_mvp', match_id=match.id) }}">MVP</a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No matches yet.</p>
  {% endif %}
{% endblock %}
